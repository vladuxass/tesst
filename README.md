# Игровая логика для игры про шарики

Модуль `logic.py` содержит полную игровую логику для игры про шарики. Интерфейс будет реализован отдельно.

## Основные компоненты

### Классы

#### `Color` (Enum)
Доступные цвета шариков (для обратной совместимости):
- RED, GREEN, BLUE
- YELLOW, MAGENTA, CYAN
- ORANGE, PURPLE

**Примечание:** Теперь шарики поддерживают произвольные RGB-цвета в формате (r, g, b).

#### `Vector2D`
2D вектор для позиции и скорости с математическими операциями.

#### `Ball`
Класс шарика с свойствами:
- `position`: позиция (Vector2D)
- `velocity`: скорость (Vector2D)
- `color`: цвет (tuple) - RGB кортеж (r, g, b)
- `radius`: радиус (по умолчанию 15.0)
- `mass`: масса (по умолчанию 1.0)

#### `GameLogic`
Основной класс игровой логики.

## Функциональность

### Движение шариков
- Шарики движутся по экрану с заданной скоростью
- Отскакивают от границ экрана
- Не отталкиваются друг от друга при столкновении

### Всасывание шариков
- При нажатии кнопки мыши шарики притягиваются к курсору
- Радиус всасывания: 50 пикселей
- Сила всасывания: 200 единиц
- При касании курсора шарик попадает в инвентарь

### Выплёвывание шариков
- Шарики из инвентаря можно "выплюнуть" обратно на экран
- Сила выплёвывания: 300 единиц
- Направление определяется движением мыши

### Смешивание цветов
- При столкновении шарики смешивают свои цвета математически
- Используется RGB-модель с усреднением компонентов
- Результат - точное математическое смешивание без ограничений палитры
- Поддерживает миллионы возможных цветовых комбинаций

### Зона удаления
- Правый верхний угол экрана (100x100 пикселей)
- Шарики, попавшие в эту зону, автоматически удаляются

## Использование

### Базовое использование

```python
from logic import GameLogic

# Создание игры
game = GameLogic(screen_width=800, screen_height=600)

# Основной игровой цикл
dt = 1/60  # 60 FPS
game.update(dt)
```

### Управление мышью

```python
# Установка позиции мыши
game.set_mouse_position(x, y)

# Установка направления мыши (для выплёвывания)
game.set_mouse_direction(dx, dy)
```

### Всасывание и выплёвывание

```python
# Начать всасывание
game.start_sucking()

# Остановить всасывание
game.stop_sucking()

# Начать выплёвывание
game.start_spitting()

# Остановить выплёвывание
game.stop_spitting()
```

### Получение информации

```python
# Получить все шарики на экране
balls = game.get_balls()

# Получить шарики в инвентаре
inventory = game.get_inventory()

# Получить количество шариков в инвентаре
count = game.get_inventory_count()

# Получить параметры зоны удаления
delete_zone = game.get_delete_zone()
```

### Дополнительные функции

```python
# Добавить новый шарик
game.add_ball(x, y, color)  # color - RGB кортеж (r, g, b)

# Примеры цветов:
red_ball = (255, 0, 0)
green_ball = (0, 255, 0)
blue_ball = (0, 0, 255)
purple_ball = (128, 0, 128)
```

# Очистить инвентарь
game.clear_inventory()
```

## Пример интеграции с интерфейсом

```python
import pygame
from logic import GameLogic

# Инициализация
pygame.init()
screen = pygame.display.set_mode((800, 600))
game = GameLogic(800, 600)
clock = pygame.time.Clock()

running = True
while running:
    dt = clock.tick(60) / 1000.0
    
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        elif event.type == pygame.MOUSEBUTTONDOWN:
            if event.button == 1:  # ЛКМ - всасывание
                game.start_sucking()
            elif event.button == 3:  # ПКМ - выплёвывание
                game.start_spitting()
        elif event.type == pygame.MOUSEBUTTONUP:
            if event.button == 1:
                game.stop_sucking()
            elif event.button == 3:
                game.stop_spitting()
        elif event.type == pygame.MOUSEMOTION:
            game.set_mouse_position(*event.pos)
    
    # Обновление игровой логики
    game.update(dt)
    
    # Отрисовка (здесь будет ваш код отрисовки)
    screen.fill((0, 0, 0))
    
    # Отрисовка шариков
    for ball in game.get_balls():
        color = ball.color  # Теперь это RGB кортеж
        pygame.draw.circle(screen, color, 
                         (int(ball.position.x), int(ball.position.y)), 
                         int(ball.radius))
    
    pygame.display.flip()

pygame.quit()
```

## Система смешивания цветов

### Математическое смешивание RGB
Система использует точное математическое смешивание цветов в RGB-пространстве:

```python
# Формула смешивания:
mixed_r = (color1_r + color2_r) / 2
mixed_g = (color1_g + color2_g) / 2
mixed_b = (color1_b + color2_b) / 2
```

### Примеры смешивания
- Красный (255, 0, 0) + Синий (0, 0, 255) = Пурпурный (127, 0, 127)
- Зелёный (0, 255, 0) + Жёлтый (255, 255, 0) = Светло-зелёный (127, 255, 0)
- Белый (255, 255, 255) + Чёрный (0, 0, 0) = Серый (127, 127, 127)

### Преимущества новой системы
- ✅ Поддерживает миллионы цветовых комбинаций
- ✅ Точное математическое смешивание
- ✅ Нет ограничений предустановленной палитры
- ✅ Универсальность и гибкость
- ✅ Реалистичные результаты смешивания

## Параметры настройки

В конструкторе `GameLogic` можно настроить:
- `screen_width`, `screen_height`: размеры экрана
- `suck_radius`: радиус всасывания
- `suck_force`: сила всасывания
- `spit_force`: сила выплёвывания
- Размер зоны удаления

В классе `Ball` можно настроить:
- `radius`: радиус шарика
- `mass`: масса шарика 